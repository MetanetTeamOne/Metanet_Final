<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--Header -->
<div th:replace="~{include/admin/head :: head}"></div>

<body class="sb-nav-fixed">
	<nav th:replace="~{include/admin/header :: header}"></nav>

	<div id="layoutSidenav">
		<div th:replace="~{include/admin/nav :: navbar}"></div>

		<div id="layoutSidenav_content">
			<main>
				<div class="container-fluid px-4">
					<h1 class="mt-4 title">워시워시 회원 관리</h1>
					<ol class="breadcrumb mb-4">
						<li class="breadcrumb-item active title">빠른 메뉴</li>
					</ol>
					<div class="row">
						<div class="col-xl-3 col-md-6">
							<div class="card bg-primary text-white mb-4">
								<div class="card-body title">주문 조회</div>
								<div class="card-footer d-flex align-items-center justify-content-between">
									<a class="small text-white stretched-link" href="/admin/order">주문 조회하기</a>
									<div class="small text-white"><i class="fas fa-angle-right"></i></div>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div class="card bg-warning text-white mb-4">
								<div class="card-body title">결제 조회</div>
								<div class="card-footer d-flex align-items-center justify-content-between">
									<a class="small text-white stretched-link" href="/admin/pay">결제 조회하기</a>
									<div class="small text-white"><i class="fas fa-angle-right"></i></div>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div class="card bg-success text-white mb-4">
								<div class="card-body title">결제 삭제</div>
								<div class="card-footer d-flex align-items-center justify-content-between">
									<a class="small text-white stretched-link" href="#">결제 삭제하기</a>
									<div class="small text-white"><i class="fas fa-angle-right"></i></div>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div class="card bg-danger text-white mb-4">
								<div class="card-body title">매출 조회</div>
								<div class="card-footer d-flex align-items-center justify-content-between">
									<a class="small text-white stretched-link" href="/admin/chart">매출 조회하기</a>
									<div class="small text-white"><i class="fas fa-angle-right"></i></div>
								</div>
							</div>
						</div>
					</div>
					<!-- <div class="row">
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        Area Chart Example
                                    </div>
                                    <div class="card-body"><canvas id="myAreaChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-bar me-1"></i>
                                        Bar Chart Example
                                    </div>
                                    <div class="card-body"><canvas id="myBarChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                        </div>-->
					<div class="card mb-4">
						<div class="card-header title">
							<i class="fas fa-table me-1"></i>
							전체 회원 정보
							<select id="stateId">
								<option value="0">탈퇴한 회원</option>
								<option value="1">탈퇴안한 회원</option>
								<option value="2" selected>전체 회원</option>
							</select>
						</div>
						<div class="card-body">
							<table id="datatablesSimple" class="table table-striped table-hover info">
								<thead>
									<tr>
										<th class="title">ID</th>
										<th class="title">이메일</th>
										<th class="title">이름</th>
										<th class="title">휴대폰번호</th>
										<th class="title">가입날짜</th>
									</tr>
								</thead>
								<tbody id="memberTable" th:fragment="memberTable">
									<tr th:each="member : ${list}">
										<td th:text="${member.memberId}"></td>
										<td th:text="${member.memberEmail}"></td>
										<td th:text="${member.memberName}"></td>
										<td th:text="${member.memberPhoneNumber}"></td>
										<td th:text="${member.memberJoinDate}"></td>
									</tr>
								</tbody>
							</table>
						</div>
						<!--<div class="datatable-bottom">
							<div class="datatable-info">Showing 21 to 30 of 57 entries</div>
							<nav class="datatable-pagination">
								<ul class="datatable-pagination-list">
									<li class="datatable-pagination-list-item"><a data-page="2"
											class="datatable-pagination-list-item-link">‹</a></li>
									<li class="datatable-pagination-list-item"><a data-page="1"
											class="datatable-pagination-list-item-link">1</a></li>
									<li class="datatable-pagination-list-item"><a data-page="2"
											class="datatable-pagination-list-item-link">2</a></li>
									<li class="datatable-pagination-list-item datatable-active"><a data-page="3"
											class="datatable-pagination-list-item-link">3</a></li>
									<li class="datatable-pagination-list-item"><a data-page="4"
											class="datatable-pagination-list-item-link">4</a></li>
									<li class="datatable-pagination-list-item"><a data-page="5"
											class="datatable-pagination-list-item-link">5</a></li>
									<li class="datatable-pagination-list-item"><a data-page="6"
											class="datatable-pagination-list-item-link">6</a></li>
									<li class="datatable-pagination-list-item"><a data-page="4"
											class="datatable-pagination-list-item-link">›</a></li>
								</ul>
							</nav>
						</div>-->
					</div>
				</div>

			</main>
			<footer th:replace="~{include/admin/footer :: footer}"></footer>
		</div>
	</div>
</body>
<script th:inline="javascript">
	document.addEventListener("DOMContentLoaded", function () {
		const optVal = document.querySelector('#stateId');
		optVal.addEventListener("change", function () {
			const selected = this.value;
			sendData(selected);
		});

		let xhr = null;

		function getInstance() {
			if (window.XMLHttpRequest) {
				xhr = new XMLHttpRequest();
			} else if (window.ActiveXObject) { //IE
				console.log("IE");
			} else {
				throw new Error("Ajax 비동기 지원하지 않아요");
			}
			return xhr;
		}

		function handlerStateChange() {
			if (xhr.readyState == 4) {
				if (xhr.status >= 200 && xhr.status < 300) {
					const fragment = xhr.responseText;
					console.log(fragment);
					document.getElementById("memberTable").innerHTML = fragment;
				} else {
					console.log("비정상 응답 : " + xhr.status);
				}
			}
		}

		function sendData(state) {
			xhr = getInstance();
			xhr.onreadystatechange = handlerStateChange;

			xhr.open("GET", "/admin/member/" + state);
			xhr.send();
		}
	});
</script>
</html>